# Websocket1CAddIn
Внешняя компонента клиент для  работы с websocket

## Реквизиты объекта

#### ОписаниеОшибки

Текст последней ошибки любого из методов

## Методы

Все функции выбрасывают исключение, если произошла какая-нибудь ошибка.

#### `Подключиться(Адрес, Заголовки)`

Установка соединения с сервером.

Параметры:
- Адрес - Строка - адрес сервера
- Заголовки - Строка - пустая строка или строка с заголовками в виде json-строки

Возвращаемое значение:
- Булево - подключение установлено

#### `ОтправитьСообщение(Сообщение)`

Параметры:
- Сообщение - Строка - текстовое сообщение для отправки

Возвращаемое значение:
- Булево - сообщение отправлено


#### `ПолучитьСообщение(Таймаут)`

Во время выполнения функции текущий поток ждет получение сообщения от сервера и если не дожидается в течение заданного таймаута - возвращает пустую строку.

Параметры:
- Таймаут - Число - таймаут в миллисекундах

Возвращаемое значение:
- Строка - текстовое сообщение от сервера

#### `Отключиться()`

Отключение соединения

#### `Версия()`

Версия компоненты

## Пример:

```1c-enterprise
ОбъектВК = Новый("AddIn.WebSocket1C.WebSocket1CAddIn");

Попытка

    Заголовки = "{""key"":""value""}";
    СоединениеУстановлено = ОбъектВК.Подключиться("ws://127.0.0.1:8080", Заголовки);
    Таймаут = 2000;

    Если СоединениеУстановлено Тогда

        СообщениеОтправлено = ОбъектВК.ОтправитьСообщение("Hello World!");
        Сообщить("Результат отправки сообщения: " + СообщениеОтправлено);

        Ответ = ОбъектВК.ПолучитьСообщение(Таймаут);
        Если ЗначениеЗаполнено(Ответ) Тогда
            Сообщить("Сообщение от сервера: " + Ответ);
        Иначе
            Сообщить(СтрШаблон("Сервер не ответил в течение %1 милисекунд!", Таймаут));
        КонецЕсли;

        ОбъектВК.Отключиться();

    КонецЕсли;

Исключение

    Сообщить(ОбъектВК.ОписаниеОшибки);

КонецПопытки;
```
